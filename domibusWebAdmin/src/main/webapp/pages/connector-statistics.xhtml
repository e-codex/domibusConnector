<?xml version="1.0" encoding="UTF-8"?>
<ui:composition template="/templates/menuTemplate.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
      			xmlns:p="http://primefaces.org/ui"
                xmlns:ui="http://java.sun.com/jsf/facelets">
                
                
   <ui:param name="title" value="E-Codex WebAdmin - Statistics"/>
    <ui:define name="content">
         
 <h:form  id="formConnector"> 
	<h:panelGrid columns="3" style="margin-bottom:10px" cellpadding="5">           
        <h:outputText class="textArea" value="Category: " />  
        <h:selectOneMenu value="#{connectorBean.categoryNumber}" >
             <p:ajax listener="#{connectorBean.start}" update="formConnector"/>
            <f:selectItem itemLabel="Select One" itemValue="" />  
            <f:selectItem itemLabel="Summary" itemValue="1" />  
            <f:selectItem itemLabel="Custom" itemValue="2" />  
            
        </h:selectOneMenu>

    </h:panelGrid>
    <h:panelGrid columns="2" style="margin-bottom:10px" cellpadding="5">           
    	<h:outputText class="textArea" value="From: "  rendered="#{connectorBean.customSelected}"/> 
    	<p:calendar value="#{connectorBean.connectorCustomService.fromDate}" id="fromButtonCal" showOn="button"  rendered="#{connectorBean.customSelected}"/>  
    	<h:outputText class="textArea" value="To: " rendered="#{connectorBean.customSelected}" />  
    	<p:calendar value="#{connectorBean.connectorCustomService.toDate}" id="toButtonCal" showOn="button"  rendered="#{connectorBean.customSelected}"/>    
    </h:panelGrid>

     <h:panelGrid columns="8" style="margin-bottom:10px" cellpadding="5">           
    	<h:outputText class="textArea" value="From Party: " rendered="#{connectorBean.customSelected}"/>  
        <h:selectOneMenu value="#{connectorBean.connectorCustomService.fromParty}" rendered="#{connectorBean.customSelected}">  
            <f:selectItem itemLabel="All" itemValue="All" />  
            <f:selectItem itemLabel="Austria" itemValue="AT" />  
            <f:selectItem itemLabel="Belgium" itemValue="BE" />
            <f:selectItem itemLabel="Czech Republic" itemValue="CR" />  
            <f:selectItem itemLabel="Estonia" itemValue="EST" />
            <f:selectItem itemLabel="France" itemValue="FR" />  
            <f:selectItem itemLabel="Germany" itemValue="DE" />
            <f:selectItem itemLabel="Greece" itemValue="GR" />  
            <f:selectItem itemLabel="Hungary" itemValue="HU" />
            <f:selectItem itemLabel="Italy" itemValue="IT" />  
            <f:selectItem itemLabel="Ireland" itemValue="IR" />
            <f:selectItem itemLabel="Jersey" itemValue="JE" />  
            <f:selectItem itemLabel="Lithuania" itemValue="LI" />
            <f:selectItem itemLabel="Malta" itemValue="MA" />  
            <f:selectItem itemLabel="Netherlands" itemValue="NE" />
            <f:selectItem itemLabel="Norway" itemValue="NO" />  
            <f:selectItem itemLabel="Poland" itemValue="PL" />            
            <f:selectItem itemLabel="Portugal" itemValue="POR" />  
            <f:selectItem itemLabel="Romania" itemValue="RO" />
            <f:selectItem itemLabel="Spain" itemValue="ESP" />  
            <f:selectItem itemLabel="Sweden" itemValue="SW" /> 
            <f:selectItem itemLabel="Turkey" itemValue="TU" />  
            <f:selectItem itemLabel="United Kingdom" itemValue="UK" />              
        </h:selectOneMenu>
        <h:outputText class="textArea" value="To Party: " rendered="#{connectorBean.customSelected}"/>  
        <h:selectOneMenu value="#{connectorBean.connectorCustomService.toParty}" rendered="#{connectorBean.customSelected}">  
            <f:selectItem itemLabel="All" itemValue="All" />  
            <f:selectItem itemLabel="Austria" itemValue="AT" />  
            <f:selectItem itemLabel="Belgium" itemValue="BE" />
            <f:selectItem itemLabel="Czech Republic" itemValue="CR" />  
            <f:selectItem itemLabel="Estonia" itemValue="EST" />
            <f:selectItem itemLabel="France" itemValue="FR" />  
            <f:selectItem itemLabel="Germany" itemValue="DE" />
            <f:selectItem itemLabel="Greece" itemValue="GR" />  
            <f:selectItem itemLabel="Hungary" itemValue="HU" />
            <f:selectItem itemLabel="Italy" itemValue="IT" />  
            <f:selectItem itemLabel="Ireland" itemValue="IR" />
            <f:selectItem itemLabel="Jersey" itemValue="JE" />  
            <f:selectItem itemLabel="Lithuania" itemValue="LI" />
            <f:selectItem itemLabel="Malta" itemValue="MA" />  
            <f:selectItem itemLabel="Netherlands" itemValue="NE" />
            <f:selectItem itemLabel="Norway" itemValue="NO" />  
            <f:selectItem itemLabel="Poland" itemValue="PL" />            
            <f:selectItem itemLabel="Portugal" itemValue="POR" />  
            <f:selectItem itemLabel="Romania" itemValue="RO" />
            <f:selectItem itemLabel="Spain" itemValue="ESP" />  
            <f:selectItem itemLabel="Sweden" itemValue="SW" /> 
            <f:selectItem itemLabel="Turkey" itemValue="TU" />  
            <f:selectItem itemLabel="United Kingdom" itemValue="UK" />              
        </h:selectOneMenu>
        <h:outputText class="textArea" value="Direction: " rendered="#{connectorBean.customSelected}"/>  
        <h:selectOneMenu value="#{connectorBean.connectorCustomService.direction}" rendered="#{connectorBean.customSelected}">  
        	<f:selectItem itemLabel="All" itemValue="All" />  
            <f:selectItem itemLabel="Incoming" itemValue="GW_TO_NAT" />  
            <f:selectItem itemLabel="Outgoing" itemValue="NAT_TO_GW" />
        </h:selectOneMenu>
        <h:outputText class="textArea" value="Status: " rendered="#{connectorBean.customSelected}"/>  
        <h:selectOneMenu value="#{connectorBean.connectorCustomService.status}" rendered="#{connectorBean.customSelected}">  
        	<f:selectItem itemLabel="All" itemValue="All" />  
            <f:selectItem itemLabel="Confirmed" itemValue="Confirmed" />  
            <f:selectItem itemLabel="Rejected" itemValue="Rejected" />
        </h:selectOneMenu>
        
        <h:outputText class="textArea" value="Service: " rendered="#{connectorBean.customSelected}"/>  
        <h:selectOneMenu value="#{connectorBean.connectorCustomService.service}" rendered="#{connectorBean.customSelected}">  
            <f:selectItem itemLabel="All" itemValue="All" />
            <f:selectItem itemLabel="EPO" itemValue="EPO" />               
        </h:selectOneMenu>
        
        <h:outputText class="textArea" value="Action: " rendered="#{connectorBean.customSelected}"/>  
        <h:selectOneMenu value="#{connectorBean.connectorCustomService.action}" rendered="#{connectorBean.customSelected}">  
            <f:selectItem itemLabel="All" itemValue="All" />
            <f:selectItem itemLabel="Form_A" itemValue="Form_A" />
            <f:selectItem itemLabel="Form_B" itemValue="Form_B" />
            <f:selectItem itemLabel="Form_C" itemValue="Form_C" />
            <f:selectItem itemLabel="Form_D" itemValue="Form_D" />
            <f:selectItem itemLabel="Form_E" itemValue="Form_E" />
            <f:selectItem itemLabel="Form_F" itemValue="Form_F" />
            <f:selectItem itemLabel="Form_G" itemValue="Form_G" />
            <f:selectItem itemLabel="SubmissionAcceptanceRejection" itemValue="SubmissionAcceptanceRejection" />
            <f:selectItem itemLabel="RelayREMMDAcceptanceRejection" itemValue="RelayREMMDAcceptanceRejection" />
            <f:selectItem itemLabel="DeliveryNonDeliveryToRecipient" itemValue="DeliveryNonDeliveryToRecipient" />
            <f:selectItem itemLabel="SubmissionAcceptanceRejection" itemValue="SubmissionAcceptanceRejection" />
            <f:selectItem itemLabel="RetrievalNonRetrievalToRecipient" itemValue="RelayREMMDAcceptanceRejection" />
            <f:selectItem itemLabel="FreeFormLetter" itemValue="DeliveryNonDeliveryToRecipient" />             
        </h:selectOneMenu>
        
        <h:outputText class="textArea" value="Last Evidence: " rendered="#{connectorBean.customSelected}"/>  
        <h:selectOneMenu value="#{connectorBean.connectorCustomService.evidence}" rendered="#{connectorBean.customSelected}">  
            <f:selectItem itemLabel="All" itemValue="All" />
            <f:selectItem itemLabel="DELIVERY" itemValue="DELIVERY" />
            <f:selectItem itemLabel="NON_DELIVERY" itemValue="NON_DELIVERY" />
            <f:selectItem itemLabel="RELAY_REMMD_ACCEPTANCE" itemValue="RELAY_REMMD_ACCEPTANCE" />
            <f:selectItem itemLabel="RETRIEVAL" itemValue="RETRIEVAL" />
            <f:selectItem itemLabel="SUBMISSION_ACCEPTANCE" itemValue="SUBMISSION_ACCEPTANCE" />
            <f:selectItem itemLabel="SUBMISSION_REJECTION" itemValue="SUBMISSION_REJECTION" />      
        </h:selectOneMenu>
        
            <h:commandButton id="generate" action="#{connectorBean.connectorCustomService.generateCustomReport}" value="Generate"
        rendered="#{connectorBean.customSelected}"/> 
     
    </h:panelGrid>


    <hr />
    

    
    <h:panelGrid columns="2" style="text-align: center; margin: 0 auto;" cellpadding="5">          
    	<p:pieChart id="messageSummary" value="#{connectorBean.connectorSummaryService.pieModelMessageSummary}" legendPosition="e" fill="false" showDataLabels="true"  
        title="Incoming/Outgoing" style="width:400px;height:300px" sliceMargin="5" diameter="150" 
        rendered="#{connectorBean.summarySelected}"/> 
        <p:pieChart id="serviceSummary" value="#{connectorBean.connectorSummaryService.pieModelServiceSummary}" legendPosition="e" fill="false" showDataLabels="true"  
        title="Services" style="width:400px;height:300px" sliceMargin="5" diameter="150" 
        rendered="#{connectorBean.summarySelected}"/> 
    
    </h:panelGrid>

    
    
     <p:growl id="msgs" showDetail="true" /> 
    
    <p:dataTable id="tbl" var="messageReportDO" value="#{connectorBean.connectorCustomService.customResultList}" paginator="true" rows="10"
    rendered="#{connectorBean.customSelected}">  
    <f:facet name="header">  
            #{connectorBean.connectorCustomService.countResult} Entries
    </f:facet>  
    <p:column>  
        <f:facet name="header">  
            <h:outputText value="EBMS_Message_ID" />  
        </f:facet>  
        <h:outputText value="#{messageReportDO.message.ebmsMessageId}" />  
    </p:column>  
  
    <p:column>  
        <f:facet name="header">  
            <h:outputText value="From_Party" />  
        </f:facet>  
        <h:outputText value="#{messageReportDO.from.partyId}"/>  
    </p:column>
 
     <p:column>  
        <f:facet name="header">  
            <h:outputText value="To_Party" />  
        </f:facet>  
        <h:outputText value="#{messageReportDO.to.partyId}"/>  
    </p:column> 
    
    <p:column>  
        <f:facet name="header">  
            <h:outputText value="Direction" />  
        </f:facet>  
        <h:outputText value="#{messageReportDO.message.direction}"/>    
    </p:column>    
    
    <p:column>  
        <f:facet name="header">  
            <h:outputText value="Confirmed" />  
        </f:facet>  
        <h:outputText value="#{messageReportDO.message.confirmed}"/>  
    </p:column>
    
    <p:column>  
        <f:facet name="header">  
            <h:outputText value="Rejected" />  
        </f:facet>  
        <h:outputText value="#{messageReportDO.message.rejected}"/>  
    </p:column>  
    
    <p:column>  
        <f:facet name="header">  
            <h:outputText value="Service" />  
        </f:facet>  
        <h:outputText value="#{messageReportDO.service.service}"/>  
    </p:column>   
    
    <p:column>  
        <f:facet name="header">  
            <h:outputText value="Action" />  
        </f:facet>  
        <h:outputText value="#{messageReportDO.action.action}"/>  
    </p:column>
    
     <p:column>  
        <f:facet name="header">  
            <h:outputText value="Last Evidence" />  
        </f:facet>  
        <h:outputText value="#{messageReportDO.lastEvidenceType}"/>  
      </p:column> 
         
        <p:column style="width:4%" exportable = "false">  
                <p:commandButton id="selectButton" update=":form:display" oncomplete="evidenceDialog.show()" icon="ui-icon-search" title="View">  
                <f:setPropertyActionListener value="#{messageReportDO}" target="#{connectorBean.connectorCustomService.selectedMessageReportDO}" />  
            </p:commandButton>  
        </p:column>  
          


	</p:dataTable>  
	
	
	<p:dialog header="Evidence Detail" widgetVar="evidenceDialog" resizable="false" id="evidenceDialog"  
                showEffect="fade" modal="false">  
  
        <h:panelGrid id="display" columns="1" cellpadding="4" style="margin:0 auto;">  
    
            <h:outputText value="#{connectorBean.connectorCustomService.selectedMessageReportDO.evidenceHistory}" escape="false" style="font-weight:bold"/>  
    
  
        </h:panelGrid>  
  
    </p:dialog>
	
	
	
	<h:panelGrid columns="1"> 
     <p:panel header="Export All Data" rendered="#{connectorBean.customSelected}">  
  
        <h:commandLink>  
            <p:graphicImage value="/images/pdf.png" />  
            <p:dataExporter type="pdf" target="tbl" fileName="ECodexMessageList" excludeColumns="9"/>  
        </h:commandLink>  
          
        <h:commandLink>  
            <p:graphicImage value="/images/csv.png" />  
            <p:dataExporter type="csv" target="tbl" fileName="ECodexMessageList" excludeColumns="9"/>  
        </h:commandLink>  
          
        <h:commandLink>  
            <p:graphicImage value="/images/xml.png" />  
            <p:dataExporter type="xml" target="tbl" fileName="ECodexMessageList" excludeColumns="9" />  
        </h:commandLink>  
    </p:panel> 
    
    </h:panelGrid>
</h:form>
</ui:define>
</ui:composition>
