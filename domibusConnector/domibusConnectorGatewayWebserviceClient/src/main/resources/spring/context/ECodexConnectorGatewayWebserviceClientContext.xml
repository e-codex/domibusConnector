<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:jaxws="http://cxf.apache.org/jaxws" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
http://cxf.apache.org/jaxws http://cxf.apache.org/schemas/jaxws.xsd">

	<import resource="classpath:/spring/context/ECodexConnectorCommonContext.xml"/>
		
	<jaxws:client id="gatewayClient" serviceClass="backend.ecodex.org._1_1.BackendInterface"
		address="${gateway.endpoint.address}" />

	<bean id="gatewayWebServiceClient"
		class="eu.ecodex.connector.gwc.ECodexConnectorGatewayWebserviceClientImpl">
		<property name="gatewayBackendWebservice" ref="gatewayClient" />
		<property name="sendMessageHelper" ref="sendMessageHelper" />
		<property name="downloadMessageHelper" ref="downloadMessageHelper" />
		<property name="commonMessageHelper" ref="commonMessageHelper" />
	</bean>
	
	<bean id="sendMessageHelper" class="eu.ecodex.connector.gwc.helper.SendMessageHelper">
		<property name="commonMessageHelper" ref="commonMessageHelper" />
	</bean>
	
	<bean id="downloadMessageHelper" class="eu.ecodex.connector.gwc.helper.DownloadMessageHelper">
		<property name="commonMessageHelper" ref="commonMessageHelper" />
	</bean>
	
	<bean id="dynamicDiscoveryClient" class= "eu.ecodex.discovery.DiscoveryClient">
		<constructor-arg value="${dynamic.discovery.sml.resolver.address}" />
	</bean>

	<bean id="commonMessageHelper" class="eu.ecodex.connector.gwc.util.CommonMessageHelper">
		<property name="connectorProperties" ref="connectorProperties" />
		<property name="persistenceService" ref="persistenceService" />
		<property name="dynamicDiscoveryClient" ref="dynamicDiscoveryClient" />
	</bean>
	

</beans>