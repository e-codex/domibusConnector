
ifndef::basepath[]
:basepath: ../../../../
endif::basepath[]

ifndef::header[]
include::{basepath}/doc/header.adoc[]
endif::header[]

= Receive Request from Gateway

This process is triggered by a request received by the WS-endpoint

== UML diagram

=== Activity diagram

[plantuml,receive_request_from_gateway,format=svg]
----
@startuml

start
:ReceiveRequest;
if () then (onSuccess)
    :Validate transition message;
    if () then (onSuccess)
        :Trigger workflow;
        if () then (onSuccess)
            end
        else (onFail)
        endif
    else (onFail)
    endif
else (onFail)

endif

:throw WebService typed exception;


end




@enduml
----

=== Component diagram

[plantuml,receive_request_from_gateway_2,format=svg]
----
@startuml

top to bottom direction
skinparam monochrome false
skinparam linetype ortho
skinparam componentStyle uml2

[ReceiveRequest]
component ValidateTransitionMessage
component TriggerWorkflow

ReceiveRequest --> ValidateTransitionMessage : onSuccess
ReceiveRequest -right-> Exception : onFail
ValidateTransitionMessage -down-> TriggerWorkflow : onSuccess
ValidateTransitionMessage -right-> Exception : onFail
TriggerWorkflow --> EndProcess : onSuccess
TriggerWorkflow -right-> Exception : onFail






@enduml
----

== process-steps

|===
| step | description | parameters | returns | on success | on fail | module responsibility

|Receive Request
|The WS Endpoint receives a request from the gateway
|DomibusConnectorMessageType
|
|Validate transition message
|Exception
|domibusConnectorLink

|Validate transition message
|The message in its transition model state is validated if the ebms data and message contents required are in place.
As a result of this step also the type of message is known. This could either be "business message" (BM) or "confirmation message" (CM).
|DomibusConnectorMessageType
|validation result
|Trigger Workflow
|Exception
|Link

|Trigger Workflow
|The workflow for this message is identified and the processes of the workflow are initialized.
|DomibusConnectorMessageType, messageType
|
|End process
|Exception
|Link